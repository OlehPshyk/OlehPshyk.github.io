!function(d){"use strict";function n(e,t){this.$select=d(e),this.$select.attr("data-placeholder")&&(t.nonSelectedText=this.$select.data("placeholder")),this.options=this.mergeOptions(d.extend({},t,this.$select.data())),this.originalOptions=this.$select.clone()[0].options,this.query="",this.searchTimeout=null,this.lastToggledInput=null,this.options.multiple="multiple"===this.$select.attr("multiple"),this.options.onChange=d.proxy(this.options.onChange,this),this.options.onDropdownShow=d.proxy(this.options.onDropdownShow,this),this.options.onDropdownHide=d.proxy(this.options.onDropdownHide,this),this.options.onDropdownShown=d.proxy(this.options.onDropdownShown,this),this.options.onDropdownHidden=d.proxy(this.options.onDropdownHidden,this),this.buildContainer(),this.buildButton(),this.buildDropdown(),this.buildSelectAll(),this.buildDropdownOptions(),this.buildFilter(),this.updateButtonText(),this.updateSelectAll(),this.options.disableIfEmpty&&d("option",this.$select).length<=0&&this.disable(),this.$select.hide().after(this.$container)}"undefined"!=typeof ko&&ko.bindingHandlers&&!ko.bindingHandlers.multiselect&&(ko.bindingHandlers.multiselect={after:["options","value","selectedOptions"],init:function(e,t,i,s,n){var o=d(e),l=ko.toJS(t());if(o.multiselect(l),i.has("options")){var r=i.get("options");ko.isObservable(r)&&ko.computed({read:function(){r(),setTimeout(function(){var e=o.data("multiselect");e&&e.updateOriginalOptions(),o.multiselect("rebuild")},1)},disposeWhenNodeIsRemoved:e})}if(i.has("value")){var a=i.get("value");ko.isObservable(a)&&ko.computed({read:function(){a(),setTimeout(function(){o.multiselect("refresh")},1)},disposeWhenNodeIsRemoved:e}).extend({rateLimit:100,notifyWhenChangesStop:!0})}if(i.has("selectedOptions")){var c=i.get("selectedOptions");ko.isObservable(c)&&ko.computed({read:function(){c(),setTimeout(function(){o.multiselect("refresh")},1)},disposeWhenNodeIsRemoved:e}).extend({rateLimit:100,notifyWhenChangesStop:!0})}ko.utils.domNodeDisposal.addDisposeCallback(e,function(){o.multiselect("destroy")})},update:function(e,t,i,s,n){var o=d(e),l=ko.toJS(t());o.multiselect("setOptions",l),o.multiselect("rebuild")}}),n.prototype={defaults:{buttonText:function(e,t){if(0===e.length)return this.nonSelectedText;if(this.allSelectedText&&e.length===d("option",d(t)).length&&1!==d("option",d(t)).length&&this.multiple)return this.selectAllNumber?this.allSelectedText+" ("+e.length+")":this.allSelectedText;if(e.length>this.numberDisplayed)return e.length+" "+this.nSelectedText;var i="",s=this.delimiterText;return e.each(function(){var e=void 0!==d(this).attr("label")?d(this).attr("label"):d(this).text();i+=e+s}),i.substr(0,i.length-2)},buttonTitle:function(e,t){if(0===e.length)return this.nonSelectedText;var i="",s=this.delimiterText;return e.each(function(){var e=void 0!==d(this).attr("label")?d(this).attr("label"):d(this).text();i+=e+s}),i.substr(0,i.length-2)},optionLabel:function(e){return d(e).attr("label")||d(e).text()},onChange:function(e,t){},onDropdownShow:function(e){},onDropdownHide:function(e){},onDropdownShown:function(e){},onDropdownHidden:function(e){},onSelectAll:function(){},enableHTML:!1,buttonClass:"btn btn-default",inheritClass:!1,buttonWidth:"auto",buttonContainer:'<div class="btn-group" />',dropRight:!1,selectedClass:"active",maxHeight:!1,checkboxName:!1,includeSelectAllOption:!1,includeSelectAllIfMoreThan:0,selectAllText:" Select all",selectAllValue:"multiselect-all",selectAllName:!1,selectAllNumber:!0,enableFiltering:!1,enableCaseInsensitiveFiltering:!1,enableClickableOptGroups:!1,filterPlaceholder:"Search",filterBehavior:"text",includeFilterClearBtn:!0,preventInputChangeEvent:!1,nonSelectedText:"None selected",nSelectedText:"selected",allSelectedText:"All selected",numberDisplayed:3,disableIfEmpty:!1,delimiterText:", ",templates:{button:'<button type="button" class="multiselect dropdown-toggle" data-toggle="dropdown"><span class="multiselect-selected-text"></span> <b class="caret"></b></button>',ul:'<ul class="multiselect-container dropdown-menu"></ul>',filter:'<li class="multiselect-item filter"><div class="input-group"><span class="input-group-addon"><i class="glyphicon glyphicon-search"></i></span><input class="form-control multiselect-search" type="text"></div></li>',filterClearBtn:'<span class="input-group-btn"><button class="btn btn-default multiselect-clear-filter" type="button"><i class="glyphicon glyphicon-remove-circle"></i></button></span>',li:'<li><a tabindex="0"><label></label></a></li>',divider:'<li class="multiselect-item divider"></li>',liGroup:'<li class="multiselect-item multiselect-group"><label></label></li>'}},constructor:n,buildContainer:function(){this.$container=d(this.options.buttonContainer),this.$container.on("show.bs.dropdown",this.options.onDropdownShow),this.$container.on("hide.bs.dropdown",this.options.onDropdownHide),this.$container.on("shown.bs.dropdown",this.options.onDropdownShown),this.$container.on("hidden.bs.dropdown",this.options.onDropdownHidden)},buildButton:function(){this.$button=d(this.options.templates.button).addClass(this.options.buttonClass),this.$select.attr("class")&&this.options.inheritClass&&this.$button.addClass(this.$select.attr("class")),this.$select.prop("disabled")?this.disable():this.enable(),this.options.buttonWidth&&"auto"!==this.options.buttonWidth&&(this.$button.css({width:this.options.buttonWidth,overflow:"hidden","text-overflow":"ellipsis"}),this.$container.css({width:this.options.buttonWidth}));var e=this.$select.attr("tabindex");e&&this.$button.attr("tabindex",e),this.$container.prepend(this.$button)},buildDropdown:function(){this.$ul=d(this.options.templates.ul),this.options.dropRight&&this.$ul.addClass("pull-right"),this.options.maxHeight&&this.$ul.css({"max-height":this.options.maxHeight+"px","overflow-y":"auto","overflow-x":"hidden"}),this.$container.append(this.$ul)},buildDropdownOptions:function(){this.$select.children().each(d.proxy(function(e,t){var i=d(t),s=i.prop("tagName").toLowerCase();i.prop("value")!==this.options.selectAllValue&&("optgroup"===s?this.createOptgroup(t):"option"===s&&("divider"===i.data("role")?this.createDivider():this.createOptionValue(t)))},this)),d("li input",this.$ul).on("change",d.proxy(function(e){var t=d(e.target),i=t.prop("checked")||!1,s=t.val()===this.options.selectAllValue;this.options.selectedClass&&(i?t.closest("li").addClass(this.options.selectedClass):t.closest("li").removeClass(this.options.selectedClass));var n=t.val(),o=this.getOptionByValue(n),l=d("option",this.$select).not(o),r=d("input",this.$container).not(t);if(s&&(i?this.selectAll():this.deselectAll()),s||(i?(o.prop("selected",!0),this.options.multiple?o.prop("selected",!0):(this.options.selectedClass&&d(r).closest("li").removeClass(this.options.selectedClass),d(r).prop("checked",!1),l.prop("selected",!1),this.$button.click()),"active"===this.options.selectedClass&&l.closest("a").css("outline","")):o.prop("selected",!1)),this.$select.change(),this.updateButtonText(),this.updateSelectAll(),this.options.onChange(o,i),this.options.preventInputChangeEvent)return!1},this)),d("li a",this.$ul).on("mousedown",function(e){if(e.shiftKey)return!1}),d("li a",this.$ul).on("touchstart click",d.proxy(function(e){e.stopPropagation();var t=d(e.target);if(e.shiftKey&&this.options.multiple){t.is("label")&&(e.preventDefault(),(t=t.find("input")).prop("checked",!t.prop("checked")));var i=t.prop("checked")||!1;if(null!==this.lastToggledInput&&this.lastToggledInput!==t){var s=t.closest("li").index(),n=this.lastToggledInput.closest("li").index();if(n<s){var o=n;n=s,s=o}++n;var l=this.$ul.find("li").slice(s,n).find("input");l.prop("checked",i),this.options.selectedClass&&l.closest("li").toggleClass(this.options.selectedClass,i);for(var r=0,a=l.length;r<a;r++){var c=d(l[r]);this.getOptionByValue(c.val()).prop("selected",i)}}t.trigger("change")}t.is("input")&&!t.closest("li").is(".multiselect-item")&&(this.lastToggledInput=t),t.blur()},this)),this.$container.off("keydown.multiselect").on("keydown.multiselect",d.proxy(function(e){if(!d('input[type="text"]',this.$container).is(":focus"))if(9===e.keyCode&&this.$container.hasClass("open"))this.$button.click();else{var t=d(this.$container).find("li:not(.divider):not(.disabled) a").filter(":visible");if(!t.length)return;var i=t.index(t.filter(":focus"));38===e.keyCode&&0<i?i--:40===e.keyCode&&i<t.length-1?i++:~i||(i=0);var s=t.eq(i);if(s.focus(),32===e.keyCode||13===e.keyCode){var n=s.find("input");n.prop("checked",!n.prop("checked")),n.change()}e.stopPropagation(),e.preventDefault()}},this)),this.options.enableClickableOptGroups&&this.options.multiple&&d("li.multiselect-group",this.$ul).on("click",d.proxy(function(e){e.stopPropagation();var t=d(e.target).parent().nextUntil("li.multiselect-group").filter(":visible:not(.disabled)"),i=!0,s=t.find("input");s.each(function(){i=i&&d(this).prop("checked")}),s.prop("checked",!i).trigger("change")},this))},createOptionValue:function(e){var t=d(e);t.is(":selected")&&t.prop("selected",!0);var i=this.options.optionLabel(e),s=t.val(),n=this.options.multiple?"checkbox":"radio",o=d(this.options.templates.li),l=d("label",o);l.addClass(n),this.options.enableHTML?l.html(" "+i):l.text(" "+i);var r=d("<input/>").attr("type",n);this.options.checkboxName&&r.attr("name",this.options.checkboxName),l.prepend(r);var a=t.prop("selected")||!1;r.val(s),s===this.options.selectAllValue&&(o.addClass("multiselect-item multiselect-all"),r.parent().parent().addClass("multiselect-all")),l.attr("title",t.attr("title")),this.$ul.append(o),t.is(":disabled")&&r.attr("disabled","disabled").prop("disabled",!0).closest("a").attr("tabindex","-1").closest("li").addClass("disabled"),r.prop("checked",a),a&&this.options.selectedClass&&r.closest("li").addClass(this.options.selectedClass)},createDivider:function(e){var t=d(this.options.templates.divider);this.$ul.append(t)},createOptgroup:function(e){var t=d(e).prop("label"),i=d(this.options.templates.liGroup);this.options.enableHTML?d("label",i).html(t):d("label",i).text(t),this.options.enableClickableOptGroups&&i.addClass("multiselect-group-clickable"),this.$ul.append(i),d(e).is(":disabled")&&i.addClass("disabled"),d("option",e).each(d.proxy(function(e,t){this.createOptionValue(t)},this))},buildSelectAll:function(){if("number"==typeof this.options.selectAllValue&&(this.options.selectAllValue=this.options.selectAllValue.toString()),!this.hasSelectAll()&&this.options.includeSelectAllOption&&this.options.multiple&&d("option",this.$select).length>this.options.includeSelectAllIfMoreThan){this.options.includeSelectAllDivider&&this.$ul.prepend(d(this.options.templates.divider));var e=d(this.options.templates.li);d("label",e).addClass("checkbox"),this.options.enableHTML?d("label",e).html(" "+this.options.selectAllText):d("label",e).text(" "+this.options.selectAllText),this.options.selectAllName?d("label",e).prepend('<input type="checkbox" name="'+this.options.selectAllName+'" />'):d("label",e).prepend('<input type="checkbox" />');var t=d("input",e);t.val(this.options.selectAllValue),e.addClass("multiselect-item multiselect-all"),t.parent().parent().addClass("multiselect-all"),this.$ul.prepend(e),t.prop("checked",!1)}},buildFilter:function(){if(this.options.enableFiltering||this.options.enableCaseInsensitiveFiltering){var e=Math.max(this.options.enableFiltering,this.options.enableCaseInsensitiveFiltering);if(this.$select.find("option").length>=e){if(this.$filter=d(this.options.templates.filter),d("input",this.$filter).attr("placeholder",this.options.filterPlaceholder),this.options.includeFilterClearBtn){var t=d(this.options.templates.filterClearBtn);t.on("click",d.proxy(function(e){clearTimeout(this.searchTimeout),this.$filter.find(".multiselect-search").val(""),d("li",this.$ul).show().removeClass("filter-hidden"),this.updateSelectAll()},this)),this.$filter.find(".input-group").append(t)}this.$ul.prepend(this.$filter),this.$filter.val(this.query).on("click",function(e){e.stopPropagation()}).on("input keydown",d.proxy(function(e){13===e.which&&e.preventDefault(),clearTimeout(this.searchTimeout),this.searchTimeout=this.asyncFunction(d.proxy(function(){var l,r;this.query!==e.target.value&&(this.query=e.target.value,d.each(d("li",this.$ul),d.proxy(function(e,t){var i=0<d("input",t).length?d("input",t).val():"",s=d("label",t).text(),n="";if("text"===this.options.filterBehavior?n=s:"value"===this.options.filterBehavior?n=i:"both"===this.options.filterBehavior&&(n=s+"\n"+i),i!==this.options.selectAllValue&&s){var o=!1;this.options.enableCaseInsensitiveFiltering&&-1<n.toLowerCase().indexOf(this.query.toLowerCase())?o=!0:-1<n.indexOf(this.query)&&(o=!0),d(t).toggle(o).toggleClass("filter-hidden",!o),d(t).hasClass("multiselect-group")?(l=t,r=o):(o&&d(l).show().removeClass("filter-hidden"),!o&&r&&d(t).show().removeClass("filter-hidden"))}},this)));this.updateSelectAll()},this),300,this)},this))}}},destroy:function(){this.$container.remove(),this.$select.show(),this.$select.data("multiselect",null)},refresh:function(){d("option",this.$select).each(d.proxy(function(e,t){var i=d("li input",this.$ul).filter(function(){return d(this).val()===d(t).val()});d(t).is(":selected")?(i.prop("checked",!0),this.options.selectedClass&&i.closest("li").addClass(this.options.selectedClass)):(i.prop("checked",!1),this.options.selectedClass&&i.closest("li").removeClass(this.options.selectedClass)),d(t).is(":disabled")?i.attr("disabled","disabled").prop("disabled",!0).closest("li").addClass("disabled"):i.prop("disabled",!1).closest("li").removeClass("disabled")},this)),this.updateButtonText(),this.updateSelectAll()},select:function(e,t){d.isArray(e)||(e=[e]);for(var i=0;i<e.length;i++){var s=e[i];if(null!=s){var n=this.getOptionByValue(s),o=this.getInputByValue(s);void 0!==n&&void 0!==o&&(this.options.multiple||this.deselectAll(!1),this.options.selectedClass&&o.closest("li").addClass(this.options.selectedClass),o.prop("checked",!0),n.prop("selected",!0),t&&this.options.onChange(n,!0))}}this.updateButtonText(),this.updateSelectAll()},clearSelection:function(){this.deselectAll(!1),this.updateButtonText(),this.updateSelectAll()},deselect:function(e,t){d.isArray(e)||(e=[e]);for(var i=0;i<e.length;i++){var s=e[i];if(null!=s){var n=this.getOptionByValue(s),o=this.getInputByValue(s);void 0!==n&&void 0!==o&&(this.options.selectedClass&&o.closest("li").removeClass(this.options.selectedClass),o.prop("checked",!1),n.prop("selected",!1),t&&this.options.onChange(n,!1))}}this.updateButtonText(),this.updateSelectAll()},selectAll:function(e,t){e=void 0===e||e;var i=d("li input[type='checkbox']:enabled",this.$ul),s=i.filter(":visible"),n=i.length,o=s.length;if(e?(s.prop("checked",!0),d("li:not(.divider):not(.disabled)",this.$ul).filter(":visible").addClass(this.options.selectedClass)):(i.prop("checked",!0),d("li:not(.divider):not(.disabled)",this.$ul).addClass(this.options.selectedClass)),n===o||!1===e)d("option:enabled",this.$select).prop("selected",!0);else{var l=s.map(function(){return d(this).val()}).get();d("option:enabled",this.$select).filter(function(e){return-1!==d.inArray(d(this).val(),l)}).prop("selected",!0)}t&&this.options.onSelectAll()},deselectAll:function(e){if(e=void 0===e||e){var t=d("li input[type='checkbox']:not(:disabled)",this.$ul).filter(":visible");t.prop("checked",!1);var i=t.map(function(){return d(this).val()}).get();d("option:enabled",this.$select).filter(function(e){return-1!==d.inArray(d(this).val(),i)}).prop("selected",!1),this.options.selectedClass&&d("li:not(.divider):not(.disabled)",this.$ul).filter(":visible").removeClass(this.options.selectedClass)}else d("li input[type='checkbox']:enabled",this.$ul).prop("checked",!1),d("option:enabled",this.$select).prop("selected",!1),this.options.selectedClass&&d("li:not(.divider):not(.disabled)",this.$ul).removeClass(this.options.selectedClass)},rebuild:function(){this.$ul.html(""),this.options.multiple="multiple"===this.$select.attr("multiple"),this.buildSelectAll(),this.buildDropdownOptions(),this.buildFilter(),this.updateButtonText(),this.updateSelectAll(),this.options.disableIfEmpty&&d("option",this.$select).length<=0?this.disable():this.enable(),this.options.dropRight&&this.$ul.addClass("pull-right")},dataprovider:function(e){var s=0,n=this.$select.empty();d.each(e,function(e,t){var i;d.isArray(t.children)?(s++,i=d("<optgroup/>").attr({label:t.label||"Group "+s,disabled:!!t.disabled}),function(e,t){for(var i=0;i<e.length;++i)t(e[i],i)}(t.children,function(e){i.append(d("<option/>").attr({value:e.value,label:e.label||e.value,title:e.title,selected:!!e.selected,disabled:!!e.disabled}))})):i=d("<option/>").attr({value:t.value,label:t.label||t.value,title:t.title,selected:!!t.selected,disabled:!!t.disabled}),n.append(i)}),this.rebuild()},enable:function(){this.$select.prop("disabled",!1),this.$button.prop("disabled",!1).removeClass("disabled")},disable:function(){this.$select.prop("disabled",!0),this.$button.prop("disabled",!0).addClass("disabled")},setOptions:function(e){this.options=this.mergeOptions(e)},mergeOptions:function(e){return d.extend(!0,{},this.defaults,this.options,e)},hasSelectAll:function(){return 0<d("li.multiselect-all",this.$ul).length},updateSelectAll:function(){if(this.hasSelectAll()){var e=d("li:not(.multiselect-item):not(.filter-hidden) input:enabled",this.$ul),t=e.length,i=e.filter(":checked").length,s=d("li.multiselect-all",this.$ul),n=s.find("input");0<i&&i===t?(n.prop("checked",!0),s.addClass(this.options.selectedClass),this.options.onSelectAll()):(n.prop("checked",!1),s.removeClass(this.options.selectedClass))}},updateButtonText:function(){var e=this.getSelected();this.options.enableHTML?d(".multiselect .multiselect-selected-text",this.$container).html(this.options.buttonText(e,this.$select)):d(".multiselect .multiselect-selected-text",this.$container).text(this.options.buttonText(e,this.$select)),d(".multiselect",this.$container).attr("title",this.options.buttonTitle(e,this.$select))},getSelected:function(){return d("option",this.$select).filter(":selected")},getOptionByValue:function(e){for(var t=d("option",this.$select),i=e.toString(),s=0;s<t.length;s+=1){var n=t[s];if(n.value===i)return d(n)}},getInputByValue:function(e){for(var t=d("li input",this.$ul),i=e.toString(),s=0;s<t.length;s+=1){var n=t[s];if(n.value===i)return d(n)}},updateOriginalOptions:function(){this.originalOptions=this.$select.clone()[0].options},asyncFunction:function(e,t,i){var s=Array.prototype.slice.call(arguments,3);return setTimeout(function(){e.apply(i||window,s)},t)},setAllSelectedText:function(e){this.options.allSelectedText=e,this.updateButtonText()}},d.fn.multiselect=function(t,i,s){return this.each(function(){var e=d(this).data("multiselect");e||(e=new n(this,"object"==typeof t&&t),d(this).data("multiselect",e)),"string"==typeof t&&(e[t](i,s),"destroy"===t&&d(this).data("multiselect",!1))})},d.fn.multiselect.Constructor=n,d(function(){d("select[data-role=multiselect]").multiselect()})}(window.jQuery),function(e,t){void 0===e&&void 0!==window&&(e=window),"function"==typeof define&&define.amd?define(["jquery"],function(e){return t(e)}):"object"==typeof module&&module.exports?module.exports=t(require("jquery")):t(e.jQuery)}(this,function(e){!function(O){"use strict";var d=["sanitize","whiteList","sanitizeFn"],l=["background","cite","href","itemtype","longdesc","poster","src","xlink:href"],r=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,a=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+/]+=*$/i;function v(e,t){var i=e.nodeName.toLowerCase();if(-1!==O.inArray(i,t))return-1===O.inArray(i,l)||Boolean(e.nodeValue.match(r)||e.nodeValue.match(a));for(var s=O(t).filter(function(e,t){return t instanceof RegExp}),n=0,o=s.length;n<o;n++)if(i.match(s[n]))return!0;return!1}function B(e,t,i){if(i&&"function"==typeof i)return i(e);for(var s=Object.keys(t),n=0,o=e.length;n<o;n++)for(var l=e[n].querySelectorAll("*"),r=0,a=l.length;r<a;r++){var c=l[r],d=c.nodeName.toLowerCase();if(-1!==s.indexOf(d))for(var h=[].slice.call(c.attributes),p=[].concat(t["*"]||[],t[d]||[]),u=0,f=h.length;u<f;u++){var m=h[u];v(m,p)||c.removeAttribute(m.nodeName)}else c.parentNode.removeChild(c)}}"classList"in document.createElement("_")||function(e){if("Element"in e){var t="classList",i="prototype",s=e.Element[i],n=Object,o=function(){var i=O(this);return{add:function(e){return i.addClass(e)},remove:function(e){return i.removeClass(e)},toggle:function(e,t){return i.toggleClass(e,t)},contains:function(e){return i.hasClass(e)}}};if(n.defineProperty){var l={get:o,enumerable:!0,configurable:!0};try{n.defineProperty(s,t,l)}catch(e){void 0!==e.number&&-2146823252!==e.number||(l.enumerable=!1,n.defineProperty(s,t,l))}}else n[i].__defineGetter__&&s.__defineGetter__(t,o)}}(window);var e,c,t,i=document.createElement("_");if(i.classList.toggle("c3",!1),i.classList.contains("c3")){var s=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(e,t){return 1 in arguments&&!this.contains(e)==!t?t:s.call(this,e)}}function C(e){var t,i=[],s=e.selectedOptions;if(e.multiple)for(var n=0,o=s.length;n<o;n++)t=s[n],i.push(t.value||t.text);else i=e.value;return i}i=null,String.prototype.startsWith||(e=function(){try{var e={},t=Object.defineProperty,i=t(e,e,e)&&t}catch(e){}return i}(),c={}.toString,t=function(e){if(null==this)throw new TypeError;var t=String(this);if(e&&"[object RegExp]"==c.call(e))throw new TypeError;var i=t.length,s=String(e),n=s.length,o=1<arguments.length?arguments[1]:void 0,l=o?Number(o):0;l!=l&&(l=0);var r=Math.min(Math.max(l,0),i);if(i<n+r)return!1;for(var a=-1;++a<n;)if(t.charCodeAt(r+a)!=s.charCodeAt(a))return!1;return!0},e?e(String.prototype,"startsWith",{value:t,configurable:!0,writable:!0}):String.prototype.startsWith=t),Object.keys||(Object.keys=function(e,t,i){for(t in i=[],e)i.hasOwnProperty.call(e,t)&&i.push(t);return i}),HTMLSelectElement.prototype.hasOwnProperty("selectedOptions")||Object.defineProperty(HTMLSelectElement.prototype,"selectedOptions",{get:function(){return this.querySelectorAll(":checked")}});var n={useDefault:!1,_set:O.valHooks.select.set};O.valHooks.select.set=function(e,t){return t&&!n.useDefault&&O(e).data("selected",!0),n._set.apply(this,arguments)};var S=null,o=function(){try{return new Event("change"),!0}catch(e){return!1}}();function k(e,t,i,s){for(var n=["content","subtext","tokens"],o=!1,l=0;l<n.length;l++){var r=n[l],a=e[r];if(a&&(a=a.toString(),"content"===r&&(a=a.replace(/<[^>]+>/g,"")),s&&(a=m(a)),a=a.toUpperCase(),o="contains"===i?0<=a.indexOf(t):a.startsWith(t)))break}return o}function A(e){return parseInt(e,10)||0}O.fn.triggerNative=function(e){var t,i=this[0];i.dispatchEvent?(o?t=new Event(e,{bubbles:!0}):(t=document.createEvent("Event")).initEvent(e,!0,!1),i.dispatchEvent(t)):i.fireEvent?((t=document.createEventObject()).eventType=e,i.fireEvent("on"+e,t)):this.trigger(e)};var h={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"},p=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,u=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\u1ab0-\\u1aff\\u1dc0-\\u1dff]","g");function f(e){return h[e]}function m(e){return(e=e.toString())&&e.replace(p,f).replace(u,"")}var g,b,x,w,$,V=(g={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},b=function(e){return g[e]},x="(?:"+Object.keys(g).join("|")+")",w=RegExp(x),$=RegExp(x,"g"),function(e){return e=null==e?"":""+e,w.test(e)?e.replace($,b):e}),y={32:" ",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9"},z={success:!1,major:"3"};try{z.full=(O.fn.dropdown.Constructor.VERSION||"").split(" ")[0].split("."),z.major=z.full[0],z.success=!0}catch(e){console.warn("There was an issue retrieving Bootstrap's version. Ensure Bootstrap is being loaded before bootstrap-select and there is no namespace collision. If loading Bootstrap asynchronously, the version may need to be manually specified via $.fn.selectpicker.Constructor.BootstrapVersion.",e)}var I=0,E=".bs.select",U={DISABLED:"disabled",DIVIDER:"divider",SHOW:"open",DROPUP:"dropup",MENU:"dropdown-menu",MENURIGHT:"dropdown-menu-right",MENULEFT:"dropdown-menu-left",BUTTONCLASS:"btn-default",POPOVERHEADER:"popover-title"},T={MENU:"."+U.MENU};"4"===z.major&&(U.DIVIDER="dropdown-divider",U.SHOW="show",U.BUTTONCLASS="btn-light",U.POPOVERHEADER="popover-header");var j={span:document.createElement("span"),i:document.createElement("i"),subtext:document.createElement("small"),a:document.createElement("a"),li:document.createElement("li"),whitespace:document.createTextNode(" "),fragment:document.createDocumentFragment()};j.a.setAttribute("role","option"),j.subtext.className="text-muted",j.text=j.span.cloneNode(!1),j.text.className="text";var D=new RegExp("38|40"),H=new RegExp("^9$|27"),F=function(e,t,i){var s=j.li.cloneNode(!1);return e&&(1===e.nodeType||11===e.nodeType?s.appendChild(e):s.innerHTML=e),void 0!==t&&""!==t&&(s.className=t),null!=i&&s.classList.add("optgroup-"+i),s},G=function(e,t,i){var s=j.a.cloneNode(!0);return e&&(11===e.nodeType?s.appendChild(e):s.insertAdjacentHTML("beforeend",e)),void 0!==t&&""!==t&&(s.className=t),"4"===z.major&&s.classList.add("dropdown-item"),i&&s.setAttribute("style",i),s},q=function(e,t){var i,s,n=j.text.cloneNode(!1);if(e.optionContent)n.innerHTML=e.optionContent;else{if(n.textContent=e.text,e.optionIcon){var o=j.whitespace.cloneNode(!1);(s=(!0===t?j.i:j.span).cloneNode(!1)).className=e.iconBase+" "+e.optionIcon,j.fragment.appendChild(s),j.fragment.appendChild(o)}e.optionSubtext&&((i=j.subtext.cloneNode(!1)).textContent=e.optionSubtext,n.appendChild(i))}if(!0===t)for(;0<n.childNodes.length;)j.fragment.appendChild(n.childNodes[0]);else j.fragment.appendChild(n);return j.fragment},_=function(e){var t,i,s=j.text.cloneNode(!1);if(s.innerHTML=e.labelEscaped,e.labelIcon){var n=j.whitespace.cloneNode(!1);(i=j.span.cloneNode(!1)).className=e.iconBase+" "+e.labelIcon,j.fragment.appendChild(i),j.fragment.appendChild(n)}return e.labelSubtext&&((t=j.subtext.cloneNode(!1)).textContent=e.labelSubtext,s.appendChild(t)),j.fragment.appendChild(s),j.fragment},L=function(e,t){var i=this;n.useDefault||(O.valHooks.select.set=n._set,n.useDefault=!0),this.$element=O(e),this.$newElement=null,this.$button=null,this.$menu=null,this.options=t,this.selectpicker={main:{map:{newIndex:{},originalIndex:{}}},current:{map:{}},search:{map:{}},view:{},keydown:{keyHistory:"",resetKeyHistory:{start:function(){return setTimeout(function(){i.selectpicker.keydown.keyHistory=""},800)}}}},null===this.options.title&&(this.options.title=this.$element.attr("title"));var s=this.options.windowPadding;"number"==typeof s&&(this.options.windowPadding=[s,s,s,s]),this.val=L.prototype.val,this.render=L.prototype.render,this.refresh=L.prototype.refresh,this.setStyle=L.prototype.setStyle,this.selectAll=L.prototype.selectAll,this.deselectAll=L.prototype.deselectAll,this.destroy=L.prototype.destroy,this.remove=L.prototype.remove,this.show=L.prototype.show,this.hide=L.prototype.hide,this.init()};function N(e){var r,a=arguments,c=e;if([].shift.apply(a),!z.success){try{z.full=(O.fn.dropdown.Constructor.VERSION||"").split(" ")[0].split(".")}catch(e){z.full=L.BootstrapVersion.split(" ")[0].split(".")}z.major=z.full[0],z.success=!0,"4"===z.major&&(U.DIVIDER="dropdown-divider",U.SHOW="show",U.BUTTONCLASS="btn-light",L.DEFAULTS.style=U.BUTTONCLASS="btn-light",U.POPOVERHEADER="popover-header")}var t=this.each(function(){var e=O(this);if(e.is("select")){var t=e.data("selectpicker"),i="object"==typeof c&&c;if(t){if(i)for(var s in i)i.hasOwnProperty(s)&&(t.options[s]=i[s])}else{var n=e.data();for(var o in n)n.hasOwnProperty(o)&&-1!==O.inArray(o,d)&&delete n[o];var l=O.extend({},L.DEFAULTS,O.fn.selectpicker.defaults||{},n,i);l.template=O.extend({},L.DEFAULTS.template,O.fn.selectpicker.defaults?O.fn.selectpicker.defaults.template:{},n.template,i.template),e.data("selectpicker",t=new L(this,l))}"string"==typeof c&&(r=t[c]instanceof Function?t[c].apply(t,a):t.options[c])}});return void 0!==r?r:t}L.VERSION="1.13.6",L.BootstrapVersion=z.major,L.DEFAULTS={noneSelectedText:"Nothing selected",noneResultsText:"No results matched {0}",countSelectedText:function(e,t){return 1==e?"{0} item selected":"{0} items selected"},maxOptionsText:function(e,t){return[1==e?"Limit reached ({n} item max)":"Limit reached ({n} items max)",1==t?"Group limit reached ({n} item max)":"Group limit reached ({n} items max)"]},selectAllText:"Select All",deselectAllText:"Deselect All",doneButton:!1,doneButtonText:"Close",multipleSeparator:", ",styleBase:"btn",style:U.BUTTONCLASS,size:"auto",title:null,selectedTextFormat:"values",width:!1,container:!1,hideDisabled:!1,showSubtext:!1,showIcon:!0,showContent:!0,dropupAuto:!0,header:!1,liveSearch:!1,liveSearchPlaceholder:null,liveSearchNormalize:!1,liveSearchStyle:"contains",actionsBox:!1,iconBase:"glyphicon",tickIcon:"glyphicon-ok",showTick:!1,template:{caret:'<span class="caret"></span>'},maxOptions:!1,mobile:!1,selectOnTab:!1,dropdownAlignRight:!1,windowPadding:0,virtualScroll:600,display:!1,sanitize:!0,sanitizeFn:null,whiteList:{"*":["class","dir","id","lang","role","tabindex","style",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]}},"4"===z.major&&(L.DEFAULTS.style="btn-light",L.DEFAULTS.iconBase="",L.DEFAULTS.tickIcon="bs-ok-default"),L.prototype={constructor:L,init:function(){var i=this,e=this.$element.attr("id");this.selectId=I++,this.$element[0].classList.add("bs-select-hidden"),this.multiple=this.$element.prop("multiple"),this.autofocus=this.$element.prop("autofocus"),this.$newElement=this.createDropdown(),this.$element.after(this.$newElement).prependTo(this.$newElement),this.$button=this.$newElement.children("button"),this.$menu=this.$newElement.children(T.MENU),this.$menuInner=this.$menu.children(".inner"),this.$searchbox=this.$menu.find("input"),this.$element[0].classList.remove("bs-select-hidden"),!0===this.options.dropdownAlignRight&&this.$menu[0].classList.add(U.MENURIGHT),void 0!==e&&this.$button.attr("data-id",e),this.checkDisabled(),this.clickListener(),this.options.liveSearch&&this.liveSearchListener(),this.render(),this.setStyle(),this.setWidth(),this.options.container?this.selectPosition():this.$element.on("hide"+E,function(){if(i.isVirtual()){var e=i.$menuInner[0],t=e.firstChild.cloneNode(!1);e.replaceChild(t,e.firstChild),e.scrollTop=0}}),this.$menu.data("this",this),this.$newElement.data("this",this),this.options.mobile&&this.mobile(),this.$newElement.on({"hide.bs.dropdown":function(e){i.$menuInner.attr("aria-expanded",!1),i.$element.trigger("hide"+E,e)},"hidden.bs.dropdown":function(e){i.$element.trigger("hidden"+E,e)},"show.bs.dropdown":function(e){i.$menuInner.attr("aria-expanded",!0),i.$element.trigger("show"+E,e)},"shown.bs.dropdown":function(e){i.$element.trigger("shown"+E,e)}}),i.$element[0].hasAttribute("required")&&this.$element.on("invalid",function(){i.$button[0].classList.add("bs-invalid"),i.$element.on("shown"+E+".invalid",function(){i.$element.val(i.$element.val()).off("shown"+E+".invalid")}).on("rendered"+E,function(){this.validity.valid&&i.$button[0].classList.remove("bs-invalid"),i.$element.off("rendered"+E)}),i.$button.on("blur"+E,function(){i.$element.trigger("focus").trigger("blur"),i.$button.off("blur"+E)})}),setTimeout(function(){i.createLi(),i.$element.trigger("loaded"+E)})},createDropdown:function(){var e,t=this.multiple||this.options.showTick?" show-tick":"",i=this.autofocus?" autofocus":"",s="",n="",o="",l="";return this.options.header&&(s='<div class="'+U.POPOVERHEADER+'"><button type="button" class="close" aria-hidden="true">&times;</button>'+this.options.header+"</div>"),this.options.liveSearch&&(n='<div class="bs-searchbox"><input type="text" class="form-control" autocomplete="off"'+(null===this.options.liveSearchPlaceholder?"":' placeholder="'+V(this.options.liveSearchPlaceholder)+'"')+' role="textbox" aria-label="Search"></div>'),this.multiple&&this.options.actionsBox&&(o='<div class="bs-actionsbox"><div class="btn-group btn-group-sm btn-block"><button type="button" class="actions-btn bs-select-all btn '+U.BUTTONCLASS+'">'+this.options.selectAllText+'</button><button type="button" class="actions-btn bs-deselect-all btn '+U.BUTTONCLASS+'">'+this.options.deselectAllText+"</button></div></div>"),this.multiple&&this.options.doneButton&&(l='<div class="bs-donebutton"><div class="btn-group btn-block"><button type="button" class="btn btn-sm '+U.BUTTONCLASS+'">'+this.options.doneButtonText+"</button></div></div>"),e='<div class="dropdown bootstrap-select'+t+'"><button type="button" class="'+this.options.styleBase+' dropdown-toggle" '+("static"===this.options.display?'data-display="static"':"")+'data-toggle="dropdown"'+i+' role="button"><div class="filter-option"><div class="filter-option-inner"><div class="filter-option-inner-inner"></div></div> </div>'+("4"===z.major?"":'<span class="bs-caret">'+this.options.template.caret+"</span>")+'</button><div class="'+U.MENU+" "+("4"===z.major?"":U.SHOW)+'" role="combobox">'+s+n+o+'<div class="inner '+U.SHOW+'" role="listbox" aria-expanded="false" tabindex="-1"><ul class="'+U.MENU+" inner "+("4"===z.major?U.SHOW:"")+'"></ul></div>'+l+"</div></div>",O(e)},setPositionData:function(){this.selectpicker.view.canHighlight=[];for(var e=0;e<this.selectpicker.current.data.length;e++){var t=this.selectpicker.current.data[e],i=!0;"divider"===t.type?(i=!1,t.height=this.sizeInfo.dividerHeight):"optgroup-label"===t.type?(i=!1,t.height=this.sizeInfo.dropdownHeaderHeight):t.height=this.sizeInfo.liHeight,t.disabled&&(i=!1),this.selectpicker.view.canHighlight.push(i),t.position=(0===e?0:this.selectpicker.current.data[e-1].position)+t.height}},isVirtual:function(){return!1!==this.options.virtualScroll&&this.selectpicker.main.elements.length>=this.options.virtualScroll||!0===this.options.virtualScroll},createView:function(z,e){e=e||0;var D=this;this.selectpicker.current=z?this.selectpicker.search:this.selectpicker.main;var H,L,N=[];function i(e,t){var i,s,n,o,l,r,a,c,d,h,p=D.selectpicker.current.elements.length,u=[],f=!0,m=D.isVirtual();D.selectpicker.view.scrollTop=e,!0===m&&D.sizeInfo.hasScrollBar&&D.$menu[0].offsetWidth>D.sizeInfo.totalMenuWidth&&(D.sizeInfo.menuWidth=D.$menu[0].offsetWidth,D.sizeInfo.totalMenuWidth=D.sizeInfo.menuWidth+D.sizeInfo.scrollBarWidth,D.$menu.css("min-width",D.sizeInfo.menuWidth)),i=Math.ceil(D.sizeInfo.menuInnerHeight/D.sizeInfo.liHeight*1.5),s=Math.round(p/i)||1;for(var v=0;v<s;v++){var g=(v+1)*i;if(v===s-1&&(g=p),u[v]=[v*i+(v?1:0),g],!p)break;void 0===l&&e<=D.selectpicker.current.data[g-1].position-D.sizeInfo.menuInnerHeight&&(l=v)}if(void 0===l&&(l=0),r=[D.selectpicker.view.position0,D.selectpicker.view.position1],n=Math.max(0,l-1),o=Math.min(s-1,l+1),D.selectpicker.view.position0=Math.max(0,u[n][0])||0,D.selectpicker.view.position1=Math.min(p,u[o][1])||0,a=r[0]!==D.selectpicker.view.position0||r[1]!==D.selectpicker.view.position1,void 0!==D.activeIndex&&(L=D.selectpicker.current.elements[D.selectpicker.current.map.newIndex[D.prevActiveIndex]],N=D.selectpicker.current.elements[D.selectpicker.current.map.newIndex[D.activeIndex]],H=D.selectpicker.current.elements[D.selectpicker.current.map.newIndex[D.selectedIndex]],t&&(D.activeIndex!==D.selectedIndex&&N&&N.length&&(N.classList.remove("active"),N.firstChild&&N.firstChild.classList.remove("active")),D.activeIndex=void 0),D.activeIndex&&D.activeIndex!==D.selectedIndex&&H&&H.length&&(H.classList.remove("active"),H.firstChild&&H.firstChild.classList.remove("active"))),void 0!==D.prevActiveIndex&&D.prevActiveIndex!==D.activeIndex&&D.prevActiveIndex!==D.selectedIndex&&L&&L.length&&(L.classList.remove("active"),L.firstChild&&L.firstChild.classList.remove("active")),(t||a)&&(c=D.selectpicker.view.visibleElements?D.selectpicker.view.visibleElements.slice():[],D.selectpicker.view.visibleElements=D.selectpicker.current.elements.slice(D.selectpicker.view.position0,D.selectpicker.view.position1),D.setOptionStatus(),(z||!1===m&&t)&&(d=c,h=D.selectpicker.view.visibleElements,f=!(d.length===h.length&&d.every(function(e,t){return e===h[t]}))),(t||!0===m)&&f)){var b,x,w=D.$menuInner[0],$=document.createDocumentFragment(),I=w.firstChild.cloneNode(!1),k=!0===m?D.selectpicker.view.visibleElements:D.selectpicker.current.elements,y=[];w.replaceChild(I,w.firstChild),v=0;for(var C=k.length;v<C;v++){var S,E,T=k[v];D.options.sanitize&&(S=T.lastChild)&&(E=D.selectpicker.current.data[v+D.selectpicker.view.position0].data)&&E.content&&!E.sanitized&&(y.push(S),E.sanitized=!0),$.appendChild(T)}D.options.sanitize&&y.length&&B(y,D.options.whiteList,D.options.sanitizeFn),!0===m&&(b=0===D.selectpicker.view.position0?0:D.selectpicker.current.data[D.selectpicker.view.position0-1].position,x=D.selectpicker.view.position1>p-1?0:D.selectpicker.current.data[p-1].position-D.selectpicker.current.data[D.selectpicker.view.position1-1].position,w.firstChild.style.marginTop=b+"px",w.firstChild.style.marginBottom=x+"px"),w.firstChild.appendChild($)}if(D.prevActiveIndex=D.activeIndex,D.options.liveSearch){if(z&&t){var O,A=0;D.selectpicker.view.canHighlight[A]||(A=1+D.selectpicker.view.canHighlight.slice(1).indexOf(!0)),O=D.selectpicker.view.visibleElements[A],D.selectpicker.view.currentActive&&(D.selectpicker.view.currentActive.classList.remove("active"),D.selectpicker.view.currentActive.firstChild&&D.selectpicker.view.currentActive.firstChild.classList.remove("active")),O&&(O.classList.add("active"),O.firstChild&&O.firstChild.classList.add("active")),D.activeIndex=D.selectpicker.current.map.originalIndex[A]}}else D.$menuInner.trigger("focus")}this.setPositionData(),i(e,!0),this.$menuInner.off("scroll.createView").on("scroll.createView",function(e,t){D.noScroll||i(this.scrollTop,t),D.noScroll=!1}),O(window).off("resize"+E+"."+this.selectId+".createView").on("resize"+E+"."+this.selectId+".createView",function(){D.$newElement.hasClass(U.SHOW)&&i(D.$menuInner[0].scrollTop)})},setPlaceholder:function(){var e=!1;if(this.options.title&&!this.multiple){this.selectpicker.view.titleOption||(this.selectpicker.view.titleOption=document.createElement("option")),e=!0;var t=this.$element[0],i=!1,s=!this.selectpicker.view.titleOption.parentNode;s&&(this.selectpicker.view.titleOption.className="bs-title-option",this.selectpicker.view.titleOption.value="",i=void 0===O(t.options[t.selectedIndex]).attr("selected")&&void 0===this.$element.data("selected")),(s||0!==this.selectpicker.view.titleOption.index)&&t.insertBefore(this.selectpicker.view.titleOption,t.firstChild),i&&(t.selectedIndex=0)}return e},createLi:function(){var e,t,i=this,s=i.options.iconBase,n=':not([hidden]):not([data-hidden="true"])',o=[],l=0,r=[],a=0,c=0,d=-1;this.options.hideDisabled&&(n+=":not(:disabled)"),(i.options.showTick||i.multiple)&&((e=j.span.cloneNode(!1)).className=s+" "+i.options.tickIcon+" check-mark",j.a.appendChild(e)),this.setPlaceholder()&&d--;for(var h=this.$element[0].options,p=0,u=h.length;p<u;p++){var f=h[p];if(d++,!f.classList.contains("bs-title-option")){var m,v,g,b,x={content:f.getAttribute("data-content"),tokens:f.getAttribute("data-tokens"),subtext:f.getAttribute("data-subtext"),icon:f.getAttribute("data-icon"),hidden:"true"===f.getAttribute("data-hidden"),divider:"true"===f.getAttribute("data-divider")},w=f.className||"",$=f.style.cssText,I=$?V($):"",k=x.content,y=f.textContent,C=f.parentNode,S=f.nextElementSibling,E=f.previousElementSibling,T="OPTGROUP"===C.tagName,O=T&&C.disabled,A=f.disabled||O,z=E&&"OPTGROUP"===E.tagName,D={hidden:"true"===C.getAttribute("data-hidden")};if(!0===x.hidden||f.hidden||T&&(!0===D.hidden||C.hidden)||i.options.hideDisabled&&(A||O))m=f.prevHiddenIndex,S&&(S.prevHiddenIndex=void 0!==m?m:p),d--;else{if(S&&void 0!==S.prevHiddenIndex&&(S.prevHiddenIndex=void 0),T&&!0!==x.divider){var H=" "+C.className||"",L=f.previousElementSibling;if(void 0!==(m=f.prevHiddenIndex)&&(L=h[m].previousElementSibling),!L){a+=1,D.subtext=C.getAttribute("data-subtext"),D.icon=C.getAttribute("data-icon");var N=C.label,B=V(N),P=D.subtext,W=D.icon;0!==p&&0<o.length&&(d++,o.push(F(!1,U.DIVIDER,a+"div")),r.push({type:"divider",optID:a})),d++,g=_({labelEscaped:B,labelSubtext:P,labelIcon:W,iconBase:s}),o.push(F(g,"dropdown-header"+H,a)),r.push({content:B,subtext:P,type:"optgroup-label",optID:a}),c=d-1}v=q({text:y,optionContent:k,optionSubtext:x.subtext,optionIcon:x.icon,iconBase:s}),o.push(F(G(v,"opt "+w+H,I),"",a)),r.push({content:k||y,subtext:x.subtext,tokens:x.tokens,type:"option",optID:a,headerIndex:c,lastIndex:c+C.querySelectorAll("option"+n).length,originalIndex:p,data:x})}else!0===x.divider?(o.push(F(!1,U.DIVIDER)),r.push({type:"divider",originalIndex:p,data:x})):(i.options.hideDisabled&&(z?E.querySelectorAll("option:disabled").length===E.children.length&&(z=!1):void 0!==(m=f.prevHiddenIndex)&&(b=h[m].previousElementSibling)&&"OPTGROUP"===b.tagName&&!b.disabled&&b.querySelectorAll("option:disabled").length<b.children.length&&(z=!0)),z&&r.length&&"divider"!==r[r.length-1].type&&(d++,o.push(F(!1,U.DIVIDER,a+"div")),r.push({type:"divider",optID:a})),v=q({text:y,optionContent:k,optionSubtext:x.subtext,optionIcon:x.icon,iconBase:s}),o.push(F(G(v,w,I))),r.push({content:k||y,subtext:x.subtext,tokens:x.tokens,type:"option",originalIndex:p,data:x}));i.selectpicker.main.map.newIndex[p]=d,i.selectpicker.main.map.originalIndex[d]=p;var R=r[r.length-1];R.disabled=A;var M=0;R.content&&(M+=R.content.length),R.subtext&&(M+=R.subtext.length),x.icon&&(M+=1),l<M&&(l=M,t=o[o.length-1])}}}this.selectpicker.main.elements=o,this.selectpicker.main.data=r,this.selectpicker.current=this.selectpicker.main,this.selectpicker.view.widestOption=t},findLis:function(){return this.$menuInner.find(".inner > li")},render:function(){this.setPlaceholder();var e,t,i=this,s=this.$element[0].selectedOptions,n=s.length,o=this.$button.find(".filter-option-inner-inner")[0],l=document.createTextNode(this.options.multipleSeparator),r=j.fragment.cloneNode(!1),a=!1;if(this.togglePlaceholder(),this.tabIndex(),"static"===this.options.selectedTextFormat)r=q({text:this.options.title},!0);else if((e=this.multiple&&-1!==this.options.selectedTextFormat.indexOf("count")&&1<n)&&(e=1<(t=this.options.selectedTextFormat.split(">")).length&&n>t[1]||1===t.length&&2<=n),!1===e){for(var c=0;c<n&&c<50;c++){var d=s[c],h={},p={content:d.getAttribute("data-content"),subtext:d.getAttribute("data-subtext"),icon:d.getAttribute("data-icon")};this.multiple&&0<c&&r.appendChild(l.cloneNode(!1)),d.title?h.text=d.title:p.content&&i.options.showContent?(h.optionContent=p.content.toString(),a=!0):(i.options.showIcon&&(h.optionIcon=p.icon,h.iconBase=this.options.iconBase),i.options.showSubtext&&!i.multiple&&p.subtext&&(h.optionSubtext=" "+p.subtext),h.text=d.textContent.trim()),r.appendChild(q(h,!0))}49<n&&r.appendChild(document.createTextNode("..."))}else{var u=':not([hidden]):not([data-hidden="true"]):not([data-divider="true"])';this.options.hideDisabled&&(u+=":not(:disabled)");var f=this.$element[0].querySelectorAll("select > option"+u+", optgroup"+u+" option"+u).length,m="function"==typeof this.options.countSelectedText?this.options.countSelectedText(n,f):this.options.countSelectedText;r=q({text:m.replace("{0}",n.toString()).replace("{1}",f.toString())},!0)}null==this.options.title&&(this.options.title=this.$element.attr("title")),r.childNodes.length||(r=q({text:void 0!==this.options.title?this.options.title:this.options.noneSelectedText},!0)),this.$button[0].title=r.textContent.replace(/<[^>]*>?/g,"").trim(),this.options.sanitize&&a&&B([r],i.options.whiteList,i.options.sanitizeFn),o.innerHTML="",o.appendChild(r),this.$element.trigger("rendered"+E)},setStyle:function(e,t){var i=this.$button[0];this.$element.attr("class")&&this.$newElement.addClass(this.$element.attr("class").replace(/selectpicker|mobile-device|bs-select-hidden|validate\[.*\]/gi,""));var s=e||this.options.style;"add"==t?i.classList.add(s):"remove"==t?i.classList.remove(s):(i.classList.remove(this.options.style),i.classList.add(s))},liHeight:function(e){if(e||!1!==this.options.size&&!this.sizeInfo){this.sizeInfo||(this.sizeInfo={});var t=document.createElement("div"),i=document.createElement("div"),s=document.createElement("div"),n=document.createElement("ul"),o=document.createElement("li"),l=document.createElement("li"),r=document.createElement("li"),a=document.createElement("a"),c=document.createElement("span"),d=this.options.header&&0<this.$menu.find("."+U.POPOVERHEADER).length?this.$menu.find("."+U.POPOVERHEADER)[0].cloneNode(!0):null,h=this.options.liveSearch?document.createElement("div"):null,p=this.options.actionsBox&&this.multiple&&0<this.$menu.find(".bs-actionsbox").length?this.$menu.find(".bs-actionsbox")[0].cloneNode(!0):null,u=this.options.doneButton&&this.multiple&&0<this.$menu.find(".bs-donebutton").length?this.$menu.find(".bs-donebutton")[0].cloneNode(!0):null,f=this.$element.find("option")[0];if(this.sizeInfo.selectWidth=this.$newElement[0].offsetWidth,c.className="text",a.className="dropdown-item "+(f?f.className:""),t.className=this.$menu[0].parentNode.className+" "+U.SHOW,t.style.width=this.sizeInfo.selectWidth+"px","auto"===this.options.width&&(i.style.minWidth=0),i.className=U.MENU+" "+U.SHOW,s.className="inner "+U.SHOW,n.className=U.MENU+" inner "+("4"===z.major?U.SHOW:""),o.className=U.DIVIDER,l.className="dropdown-header",c.appendChild(document.createTextNode("​")),a.appendChild(c),r.appendChild(a),l.appendChild(c.cloneNode(!0)),this.selectpicker.view.widestOption&&n.appendChild(this.selectpicker.view.widestOption.cloneNode(!0)),n.appendChild(r),n.appendChild(o),n.appendChild(l),d&&i.appendChild(d),h){var m=document.createElement("input");h.className="bs-searchbox",m.className="form-control",h.appendChild(m),i.appendChild(h)}p&&i.appendChild(p),s.appendChild(n),i.appendChild(s),u&&i.appendChild(u),t.appendChild(i),document.body.appendChild(t);var v,g=a.offsetHeight,b=l?l.offsetHeight:0,x=d?d.offsetHeight:0,w=h?h.offsetHeight:0,$=p?p.offsetHeight:0,I=u?u.offsetHeight:0,k=O(o).outerHeight(!0),y=!!window.getComputedStyle&&window.getComputedStyle(i),C=i.offsetWidth,S=y?null:O(i),E={vert:A(y?y.paddingTop:S.css("paddingTop"))+A(y?y.paddingBottom:S.css("paddingBottom"))+A(y?y.borderTopWidth:S.css("borderTopWidth"))+A(y?y.borderBottomWidth:S.css("borderBottomWidth")),horiz:A(y?y.paddingLeft:S.css("paddingLeft"))+A(y?y.paddingRight:S.css("paddingRight"))+A(y?y.borderLeftWidth:S.css("borderLeftWidth"))+A(y?y.borderRightWidth:S.css("borderRightWidth"))},T={vert:E.vert+A(y?y.marginTop:S.css("marginTop"))+A(y?y.marginBottom:S.css("marginBottom"))+2,horiz:E.horiz+A(y?y.marginLeft:S.css("marginLeft"))+A(y?y.marginRight:S.css("marginRight"))+2};s.style.overflowY="scroll",v=i.offsetWidth-C,document.body.removeChild(t),this.sizeInfo.liHeight=g,this.sizeInfo.dropdownHeaderHeight=b,this.sizeInfo.headerHeight=x,this.sizeInfo.searchHeight=w,this.sizeInfo.actionsHeight=$,this.sizeInfo.doneButtonHeight=I,this.sizeInfo.dividerHeight=k,this.sizeInfo.menuPadding=E,this.sizeInfo.menuExtras=T,this.sizeInfo.menuWidth=C,this.sizeInfo.totalMenuWidth=this.sizeInfo.menuWidth,this.sizeInfo.scrollBarWidth=v,this.sizeInfo.selectHeight=this.$newElement[0].offsetHeight,this.setPositionData()}},getSelectPosition:function(){var e,t=O(window),i=this.$newElement.offset(),s=O(this.options.container);this.options.container&&s.length&&!s.is("body")?((e=s.offset()).top+=parseInt(s.css("borderTopWidth")),e.left+=parseInt(s.css("borderLeftWidth"))):e={top:0,left:0};var n=this.options.windowPadding;this.sizeInfo.selectOffsetTop=i.top-e.top-t.scrollTop(),this.sizeInfo.selectOffsetBot=t.height()-this.sizeInfo.selectOffsetTop-this.sizeInfo.selectHeight-e.top-n[2],this.sizeInfo.selectOffsetLeft=i.left-e.left-t.scrollLeft(),this.sizeInfo.selectOffsetRight=t.width()-this.sizeInfo.selectOffsetLeft-this.sizeInfo.selectWidth-e.left-n[1],this.sizeInfo.selectOffsetTop-=n[0],this.sizeInfo.selectOffsetLeft-=n[3]},setMenuSize:function(e){this.getSelectPosition();var t,i,s,n,o,l,r,a=this.sizeInfo.selectWidth,c=this.sizeInfo.liHeight,d=this.sizeInfo.headerHeight,h=this.sizeInfo.searchHeight,p=this.sizeInfo.actionsHeight,u=this.sizeInfo.doneButtonHeight,f=this.sizeInfo.dividerHeight,m=this.sizeInfo.menuPadding,v=0;if(this.options.dropupAuto&&(r=c*this.selectpicker.current.elements.length+m.vert,this.$newElement.toggleClass(U.DROPUP,this.sizeInfo.selectOffsetTop-this.sizeInfo.selectOffsetBot>this.sizeInfo.menuExtras.vert&&r+this.sizeInfo.menuExtras.vert+50>this.sizeInfo.selectOffsetBot)),"auto"===this.options.size)n=3<this.selectpicker.current.elements.length?3*this.sizeInfo.liHeight+this.sizeInfo.menuExtras.vert-2:0,i=this.sizeInfo.selectOffsetBot-this.sizeInfo.menuExtras.vert,s=n+d+h+p+u,l=Math.max(n-m.vert,0),this.$newElement.hasClass(U.DROPUP)&&(i=this.sizeInfo.selectOffsetTop-this.sizeInfo.menuExtras.vert),t=(o=i)-d-h-p-u-m.vert;else if(this.options.size&&"auto"!=this.options.size&&this.selectpicker.current.elements.length>this.options.size){for(var g=0;g<this.options.size;g++)"divider"===this.selectpicker.current.data[g].type&&v++;t=(i=c*this.options.size+v*f+m.vert)-m.vert,o=i+d+h+p+u,s=l=""}"auto"===this.options.dropdownAlignRight&&this.$menu.toggleClass(U.MENURIGHT,this.sizeInfo.selectOffsetLeft>this.sizeInfo.selectOffsetRight&&this.sizeInfo.selectOffsetRight<this.sizeInfo.totalMenuWidth-a),this.$menu.css({"max-height":o+"px",overflow:"hidden","min-height":s+"px"}),this.$menuInner.css({"max-height":t+"px","overflow-y":"auto","min-height":l+"px"}),this.sizeInfo.menuInnerHeight=Math.max(t,1),this.selectpicker.current.data.length&&this.selectpicker.current.data[this.selectpicker.current.data.length-1].position>this.sizeInfo.menuInnerHeight&&(this.sizeInfo.hasScrollBar=!0,this.sizeInfo.totalMenuWidth=this.sizeInfo.menuWidth+this.sizeInfo.scrollBarWidth,this.$menu.css("min-width",this.sizeInfo.totalMenuWidth)),this.dropdown&&this.dropdown._popper&&this.dropdown._popper.update()},setSize:function(e){if(this.liHeight(e),this.options.header&&this.$menu.css("padding-top",0),!1!==this.options.size){var t,i=this,s=O(window),n=0;this.setMenuSize(),this.options.liveSearch&&this.$searchbox.off("input.setMenuSize propertychange.setMenuSize").on("input.setMenuSize propertychange.setMenuSize",function(){return i.setMenuSize()}),"auto"===this.options.size?s.off("resize"+E+"."+this.selectId+".setMenuSize scroll"+E+"."+this.selectId+".setMenuSize").on("resize"+E+"."+this.selectId+".setMenuSize scroll"+E+"."+this.selectId+".setMenuSize",function(){return i.setMenuSize()}):this.options.size&&"auto"!=this.options.size&&this.selectpicker.current.elements.length>this.options.size&&s.off("resize"+E+"."+this.selectId+".setMenuSize scroll"+E+"."+this.selectId+".setMenuSize"),e?n=this.$menuInner[0].scrollTop:i.multiple||"number"==typeof(t=i.selectpicker.main.map.newIndex[i.$element[0].selectedIndex])&&!1!==i.options.size&&(n=(n=i.sizeInfo.liHeight*t)-i.sizeInfo.menuInnerHeight/2+i.sizeInfo.liHeight/2),i.createView(!1,n)}},setWidth:function(){var i=this;"auto"===this.options.width?requestAnimationFrame(function(){i.$menu.css("min-width","0"),i.liHeight(),i.setMenuSize();var e=i.$newElement.clone().appendTo("body"),t=e.css("width","auto").children("button").outerWidth();e.remove(),i.sizeInfo.selectWidth=Math.max(i.sizeInfo.totalMenuWidth,t),i.$newElement.css("width",i.sizeInfo.selectWidth+"px")}):"fit"===this.options.width?(this.$menu.css("min-width",""),this.$newElement.css("width","").addClass("fit-width")):this.options.width?(this.$menu.css("min-width",""),this.$newElement.css("width",this.options.width)):(this.$menu.css("min-width",""),this.$newElement.css("width","")),this.$newElement.hasClass("fit-width")&&"fit"!==this.options.width&&this.$newElement[0].classList.remove("fit-width")},selectPosition:function(){this.$bsContainer=O('<div class="bs-container" />');var s,n,o,l=this,r=O(this.options.container),e=function(e){var t={},i=l.options.display||!!O.fn.dropdown.Constructor.Default&&O.fn.dropdown.Constructor.Default.display;l.$bsContainer.addClass(e.attr("class").replace(/form-control|fit-width/gi,"")).toggleClass(U.DROPUP,e.hasClass(U.DROPUP)),s=e.offset(),r.is("body")?n={top:0,left:0}:((n=r.offset()).top+=parseInt(r.css("borderTopWidth"))-r.scrollTop(),n.left+=parseInt(r.css("borderLeftWidth"))-r.scrollLeft()),o=e.hasClass(U.DROPUP)?0:e[0].offsetHeight,(z.major<4||"static"===i)&&(t.top=s.top-n.top+o,t.left=s.left-n.left),t.width=e[0].offsetWidth,l.$bsContainer.css(t)};this.$button.on("click.bs.dropdown.data-api",function(){l.isDisabled()||(e(l.$newElement),l.$bsContainer.appendTo(l.options.container).toggleClass(U.SHOW,!l.$button.hasClass(U.SHOW)).append(l.$menu))}),O(window).off("resize"+E+"."+this.selectId+" scroll"+E+"."+this.selectId).on("resize"+E+"."+this.selectId+" scroll"+E+"."+this.selectId,function(){l.$newElement.hasClass(U.SHOW)&&e(l.$newElement)}),this.$element.on("hide"+E,function(){l.$menu.data("height",l.$menu.height()),l.$bsContainer.detach()})},setOptionStatus:function(){var e=this,t=this.$element[0].options;if(e.noScroll=!1,e.selectpicker.view.visibleElements&&e.selectpicker.view.visibleElements.length)for(var i=0;i<e.selectpicker.view.visibleElements.length;i++){var s=e.selectpicker.current.map.originalIndex[i+e.selectpicker.view.position0],n=t[s];if(n){var o=this.selectpicker.main.map.newIndex[s],l=this.selectpicker.main.elements[o];e.setDisabled(s,n.disabled||"OPTGROUP"===n.parentNode.tagName&&n.parentNode.disabled,o,l),e.setSelected(s,n.selected,o,l)}}},setSelected:function(e,t,i,s){var n,o,l,r=void 0!==this.activeIndex,a=this.activeIndex===e||t&&!this.multiple&&!r;i||(i=this.selectpicker.main.map.newIndex[e]),s||(s=this.selectpicker.main.elements[i]),l=s.firstChild,t&&(this.selectedIndex=e),s.classList.toggle("selected",t),s.classList.toggle("active",a),a&&(this.selectpicker.view.currentActive=s,this.activeIndex=e),l&&(l.classList.toggle("selected",t),l.classList.toggle("active",a),l.setAttribute("aria-selected",t)),a||!r&&t&&void 0!==this.prevActiveIndex&&(n=this.selectpicker.main.map.newIndex[this.prevActiveIndex],(o=this.selectpicker.main.elements[n]).classList.remove("active"),o.firstChild&&o.firstChild.classList.remove("active"))},setDisabled:function(e,t,i,s){var n;i||(i=this.selectpicker.main.map.newIndex[e]),s||(s=this.selectpicker.main.elements[i]),n=s.firstChild,s.classList.toggle(U.DISABLED,t),n&&("4"===z.major&&n.classList.toggle(U.DISABLED,t),n.setAttribute("aria-disabled",t),t?n.setAttribute("tabindex",-1):n.setAttribute("tabindex",0))},isDisabled:function(){return this.$element[0].disabled},checkDisabled:function(){var e=this;this.isDisabled()?(this.$newElement[0].classList.add(U.DISABLED),this.$button.addClass(U.DISABLED).attr("tabindex",-1).attr("aria-disabled",!0)):(this.$button[0].classList.contains(U.DISABLED)&&(this.$newElement[0].classList.remove(U.DISABLED),this.$button.removeClass(U.DISABLED).attr("aria-disabled",!1)),-1!=this.$button.attr("tabindex")||this.$element.data("tabindex")||this.$button.removeAttr("tabindex")),this.$button.on("click",function(){return!e.isDisabled()})},togglePlaceholder:function(){var e=this.$element[0],t=e.selectedIndex,i=-1===t;i||e.options[t].value||(i=!0),this.$button.toggleClass("bs-placeholder",i)},tabIndex:function(){this.$element.data("tabindex")!==this.$element.attr("tabindex")&&-98!==this.$element.attr("tabindex")&&"-98"!==this.$element.attr("tabindex")&&(this.$element.data("tabindex",this.$element.attr("tabindex")),this.$button.attr("tabindex",this.$element.data("tabindex"))),this.$element.attr("tabindex",-98)},clickListener:function(){var y=this,t=O(document);function e(){y.options.liveSearch?y.$searchbox.trigger("focus"):y.$menuInner.trigger("focus")}function i(){y.dropdown&&y.dropdown._popper&&y.dropdown._popper.state.isCreated?e():requestAnimationFrame(i)}t.data("spaceSelect",!1),this.$button.on("keyup",function(e){/(32)/.test(e.keyCode.toString(10))&&t.data("spaceSelect")&&(e.preventDefault(),t.data("spaceSelect",!1))}),this.$newElement.on("show.bs.dropdown",function(){3<z.major&&!y.dropdown&&(y.dropdown=y.$button.data("bs.dropdown"),y.dropdown._menu=y.$menu[0])}),this.$button.on("click.bs.dropdown.data-api",function(){y.$newElement.hasClass(U.SHOW)||y.setSize()}),this.$element.on("shown"+E,function(){y.$menuInner[0].scrollTop!==y.selectpicker.view.scrollTop&&(y.$menuInner[0].scrollTop=y.selectpicker.view.scrollTop),3<z.major?requestAnimationFrame(i):e()}),this.$menuInner.on("click","li a",function(e,t){var i=O(this),s=y.isVirtual()?y.selectpicker.view.position0:0,n=y.selectpicker.current.map.originalIndex[i.parent().index()+s],o=C(y.$element[0]),l=y.$element.prop("selectedIndex"),r=!0;if(y.multiple&&1!==y.options.maxOptions&&e.stopPropagation(),e.preventDefault(),!y.isDisabled()&&!i.parent().hasClass(U.DISABLED)){var a=y.$element.find("option"),c=a.eq(n),d=c.prop("selected"),h=c.parent("optgroup"),p=h.find("option"),u=y.options.maxOptions,f=h.data("maxOptions")||!1;if(n===y.activeIndex&&(t=!0),t||(y.prevActiveIndex=y.activeIndex,y.activeIndex=void 0),y.multiple){if(c.prop("selected",!d),y.setSelected(n,!d),i.trigger("blur"),!1!==u||!1!==f){var m=u<a.filter(":selected").length,v=f<h.find("option:selected").length;if(u&&m||f&&v)if(u&&1==u){a.prop("selected",!1),c.prop("selected",!0);for(var g=0;g<a.length;g++)y.setSelected(g,!1);y.setSelected(n,!0)}else if(f&&1==f){for(h.find("option:selected").prop("selected",!1),c.prop("selected",!0),g=0;g<p.length;g++){var b=p[g];y.setSelected(a.index(b),!1)}y.setSelected(n,!0)}else{var x="string"==typeof y.options.maxOptionsText?[y.options.maxOptionsText,y.options.maxOptionsText]:y.options.maxOptionsText,w="function"==typeof x?x(u,f):x,$=w[0].replace("{n}",u),I=w[1].replace("{n}",f),k=O('<div class="notify"></div>');w[2]&&($=$.replace("{var}",w[2][1<u?0:1]),I=I.replace("{var}",w[2][1<f?0:1])),c.prop("selected",!1),y.$menu.append(k),u&&m&&(k.append(O("<div>"+$+"</div>")),r=!1,y.$element.trigger("maxReached"+E)),f&&v&&(k.append(O("<div>"+I+"</div>")),r=!1,y.$element.trigger("maxReachedGrp"+E)),setTimeout(function(){y.setSelected(n,!1)},10),k.delay(750).fadeOut(300,function(){O(this).remove()})}}}else a.prop("selected",!1),c.prop("selected",!0),y.setSelected(n,!0);!y.multiple||y.multiple&&1===y.options.maxOptions?y.$button.trigger("focus"):y.options.liveSearch&&y.$searchbox.trigger("focus"),r&&(o!=C(y.$element[0])&&y.multiple||l!=y.$element.prop("selectedIndex")&&!y.multiple)&&(S=[n,c.prop("selected"),o],y.$element.triggerNative("change"))}}),this.$menu.on("click","li."+U.DISABLED+" a, ."+U.POPOVERHEADER+", ."+U.POPOVERHEADER+" :not(.close)",function(e){e.currentTarget==this&&(e.preventDefault(),e.stopPropagation(),y.options.liveSearch&&!O(e.target).hasClass("close")?y.$searchbox.trigger("focus"):y.$button.trigger("focus"))}),this.$menuInner.on("click",".divider, .dropdown-header",function(e){e.preventDefault(),e.stopPropagation(),y.options.liveSearch?y.$searchbox.trigger("focus"):y.$button.trigger("focus")}),this.$menu.on("click","."+U.POPOVERHEADER+" .close",function(){y.$button.trigger("click")}),this.$searchbox.on("click",function(e){e.stopPropagation()}),this.$menu.on("click",".actions-btn",function(e){y.options.liveSearch?y.$searchbox.trigger("focus"):y.$button.trigger("focus"),e.preventDefault(),e.stopPropagation(),O(this).hasClass("bs-select-all")?y.selectAll():y.deselectAll()}),this.$element.on({change:function(){y.render(),y.$element.trigger("changed"+E,S),S=null},focus:function(){y.options.mobile||y.$button.trigger("focus")}})},liveSearchListener:function(){var u=this,f=document.createElement("li");this.$button.on("click.bs.dropdown.data-api",function(){u.$searchbox.val()&&u.$searchbox.val("")}),this.$searchbox.on("click.bs.dropdown.data-api focus.bs.dropdown.data-api touchend.bs.dropdown.data-api",function(e){e.stopPropagation()}),this.$searchbox.on("input propertychange",function(){var e=u.$searchbox.val();if(u.selectpicker.search.map.newIndex={},u.selectpicker.search.map.originalIndex={},u.selectpicker.search.elements=[],u.selectpicker.search.data=[],e){var t=[],i=e.toUpperCase(),s={},n=[],o=u._searchStyle(),l=u.options.liveSearchNormalize;l&&(i=m(i)),u._$lisSelected=u.$menuInner.find(".selected");for(var r=0;r<u.selectpicker.main.data.length;r++){var a=u.selectpicker.main.data[r];s[r]||(s[r]=k(a,i,o,l)),s[r]&&void 0!==a.headerIndex&&-1===n.indexOf(a.headerIndex)&&(0<a.headerIndex&&(s[a.headerIndex-1]=!0,n.push(a.headerIndex-1)),s[a.headerIndex]=!0,n.push(a.headerIndex),s[a.lastIndex+1]=!0),s[r]&&"optgroup-label"!==a.type&&n.push(r)}r=0;for(var c=n.length;r<c;r++){var d=n[r],h=n[r-1],p=(a=u.selectpicker.main.data[d],u.selectpicker.main.data[h]);("divider"!==a.type||"divider"===a.type&&p&&"divider"!==p.type&&c-1!==r)&&(u.selectpicker.search.data.push(a),t.push(u.selectpicker.main.elements[d]),a.hasOwnProperty("originalIndex")&&(u.selectpicker.search.map.newIndex[a.originalIndex]=t.length-1,u.selectpicker.search.map.originalIndex[t.length-1]=a.originalIndex))}u.activeIndex=void 0,u.noScroll=!0,u.$menuInner.scrollTop(0),u.selectpicker.search.elements=t,u.createView(!0),t.length||(f.className="no-results",f.innerHTML=u.options.noneResultsText.replace("{0}",'"'+V(e)+'"'),u.$menuInner[0].firstChild.appendChild(f))}else u.$menuInner.scrollTop(0),u.createView(!1)})},_searchStyle:function(){return this.options.liveSearchStyle||"contains"},val:function(e){return void 0!==e?(this.$element.val(e).triggerNative("change"),this.$element):this.$element.val()},changeAll:function(e){if(this.multiple){void 0===e&&(e=!0);var t=this.$element[0],i=t.options,s=0,n=0,o=C(t);t.classList.add("bs-select-hidden");for(var l=0,r=this.selectpicker.current.elements.length;l<r;l++){var a=this.selectpicker.current.data[l],c=i[this.selectpicker.current.map.originalIndex[l]];c&&!c.disabled&&"divider"!==a.type&&(c.selected&&s++,(c.selected=e)&&n++)}t.classList.remove("bs-select-hidden"),s!==n&&(this.setOptionStatus(),this.togglePlaceholder(),S=[null,null,o],this.$element.triggerNative("change"))}},selectAll:function(){return this.changeAll(!0)},deselectAll:function(){return this.changeAll(!1)},toggle:function(e){(e=e||window.event)&&e.stopPropagation(),this.$button.trigger("click.bs.dropdown.data-api")},keydown:function(e){var t,i,s,n,o,l=O(this),r=l.hasClass("dropdown-toggle"),a=(r?l.closest(".dropdown"):l.closest(T.MENU)).data("this"),c=a.findLis(),d=!1,h=9===e.which&&!r&&!a.options.selectOnTab,p=D.test(e.which)||h,u=a.$menuInner[0].scrollTop,f=a.isVirtual(),m=!0===f?a.selectpicker.view.position0:0;if(!(i=a.$newElement.hasClass(U.SHOW))&&(p||48<=e.which&&e.which<=57||96<=e.which&&e.which<=105||65<=e.which&&e.which<=90)&&(a.$button.trigger("click.bs.dropdown.data-api"),a.options.liveSearch))a.$searchbox.trigger("focus");else{if(27===e.which&&i&&(e.preventDefault(),a.$button.trigger("click.bs.dropdown.data-api").trigger("focus")),p){if(!c.length)return;void 0===(t=!0===f?c.index(c.filter(".active")):a.selectpicker.current.map.newIndex[a.activeIndex])&&(t=-1),-1!==t&&((s=a.selectpicker.current.elements[t+m]).classList.remove("active"),s.firstChild&&s.firstChild.classList.remove("active")),38===e.which?(-1!==t&&t--,t+m<0&&(t+=c.length),a.selectpicker.view.canHighlight[t+m]||-1==(t=a.selectpicker.view.canHighlight.slice(0,t+m).lastIndexOf(!0)-m)&&(t=c.length-1)):(40===e.which||h)&&(++t+m>=a.selectpicker.view.canHighlight.length&&(t=0),a.selectpicker.view.canHighlight[t+m]||(t=t+1+a.selectpicker.view.canHighlight.slice(t+m+1).indexOf(!0))),e.preventDefault();var v=m+t;38===e.which?0===m&&t===c.length-1?(a.$menuInner[0].scrollTop=a.$menuInner[0].scrollHeight,v=a.selectpicker.current.elements.length-1):d=(o=(n=a.selectpicker.current.data[v]).position-n.height)<u:(40===e.which||h)&&(0===t?v=a.$menuInner[0].scrollTop=0:d=u<(o=(n=a.selectpicker.current.data[v]).position-a.sizeInfo.menuInnerHeight)),(s=a.selectpicker.current.elements[v])&&(s.classList.add("active"),s.firstChild&&s.firstChild.classList.add("active")),a.activeIndex=a.selectpicker.current.map.originalIndex[v],a.selectpicker.view.currentActive=s,d&&(a.$menuInner[0].scrollTop=o),a.options.liveSearch?a.$searchbox.trigger("focus"):l.trigger("focus")}else if(!l.is("input")&&!H.test(e.which)||32===e.which&&a.selectpicker.keydown.keyHistory){var g,b,x=[];e.preventDefault(),a.selectpicker.keydown.keyHistory+=y[e.which],a.selectpicker.keydown.resetKeyHistory.cancel&&clearTimeout(a.selectpicker.keydown.resetKeyHistory.cancel),a.selectpicker.keydown.resetKeyHistory.cancel=a.selectpicker.keydown.resetKeyHistory.start(),b=a.selectpicker.keydown.keyHistory,/^(.)\1+$/.test(b)&&(b=b.charAt(0));for(var w=0;w<a.selectpicker.current.data.length;w++){var $=a.selectpicker.current.data[w];k($,b,"startsWith",!0)&&a.selectpicker.view.canHighlight[w]&&($.index=w,x.push($.originalIndex))}if(x.length){var I=0;c.removeClass("active").find("a").removeClass("active"),1===b.length&&(-1===(I=x.indexOf(a.activeIndex))||I===x.length-1?I=0:I++),g=a.selectpicker.current.map.newIndex[x[I]],d=0<u-(n=a.selectpicker.current.data[g]).position?(o=n.position-n.height,!0):(o=n.position-a.sizeInfo.menuInnerHeight,n.position>u+a.sizeInfo.menuInnerHeight),(s=a.selectpicker.current.elements[g]).classList.add("active"),s.firstChild&&s.firstChild.classList.add("active"),a.activeIndex=x[I],s.firstChild.trigger("focus"),d&&(a.$menuInner[0].scrollTop=o),l.trigger("focus")}}i&&(32===e.which&&!a.selectpicker.keydown.keyHistory||13===e.which||9===e.which&&a.options.selectOnTab)&&(32!==e.which&&e.preventDefault(),a.options.liveSearch&&32===e.which||(a.$menuInner.find(".active a").trigger("click",!0),l.trigger("focus"),a.options.liveSearch||(e.preventDefault(),O(document).data("spaceSelect",!0))))}},mobile:function(){this.$element[0].classList.add("mobile-device")},refresh:function(){var e=O.extend({},this.options,this.$element.data());this.options=e,this.selectpicker.main.map.newIndex={},this.selectpicker.main.map.originalIndex={},this.checkDisabled(),this.render(),this.createLi(),this.setStyle(),this.setWidth(),this.setSize(!0),this.$element.trigger("refreshed"+E)},hide:function(){this.$newElement.hide()},show:function(){this.$newElement.show()},remove:function(){this.$newElement.remove(),this.$element.remove()},destroy:function(){this.$newElement.before(this.$element).remove(),this.$bsContainer?this.$bsContainer.remove():this.$menu.remove(),this.$element.off(E).removeData("selectpicker").removeClass("bs-select-hidden selectpicker"),O(window).off(E+"."+this.selectId)}};var P=O.fn.selectpicker;O.fn.selectpicker=N,O.fn.selectpicker.Constructor=L,O.fn.selectpicker.noConflict=function(){return O.fn.selectpicker=P,this},O(document).off("keydown.bs.dropdown.data-api").on("keydown"+E,'.bootstrap-select [data-toggle="dropdown"], .bootstrap-select [role="listbox"], .bootstrap-select .bs-searchbox input',L.prototype.keydown).on("focusin.modal",'.bootstrap-select [data-toggle="dropdown"], .bootstrap-select [role="listbox"], .bootstrap-select .bs-searchbox input',function(e){e.stopPropagation()}),O(window).on("load"+E+".data-api",function(){O(".selectpicker").each(function(){var e=O(this);N.call(e,e.data())})})}(e)});